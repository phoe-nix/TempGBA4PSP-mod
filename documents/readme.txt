-- TempGBA for PSP --

-- 概要

ゲームボーイアドバンスのハードウェアをエミュレートします。
ゲームボーイアドバンス専用ソフトの実行が可能です。

ゲームボーイ、ゲームボーイカラーのソフトには対応しません。


-- 免責

いかなる保証もありません。
本ソフトウェアによって生じた損害等に関し、作者は一切責任を負いません。


-- 利用環境

FW 3.71以降で使用して下さい。
CFW 5.00M33は、M33-4以降を使用して下さい。(M33-1〜3はクロック設定が動作しません)


-- GBA BIOS

実行するためには、実機のBIOSイメージが必要となります。

ファイル名    ：gba_bios.bin
ファイルサイズ：16.0 KB (16,384 バイト)
チェックサム  ：GBA, GBA SP, GAMEBOY micro & GAMEBOY PLAYER
                 CRC32: 81977335   MD5: a860e8c0b6d573d191e4ec7db1b1e4f6
                GBA BIOS on Nintendo DS & DS Lite
                 CRC32: a6473709   MD5: 1c0d67db9e1208b95a1506b1688a0ad6

国外向けのモデルでも同一です。

実機のBIOSイメージをダンプする方法は、各自で調べて下さい。
http://wiki.pocketheaven.com/GBA_BIOS

ここでは、NDSでの注意点のみ記述します。

NDSには、3種類のBIOSがあります。(NDS-ARM9, NDS-ARM7, GBA)

NDSでGBA BIOSのダンプを行うには、GBA(SLOT2)のフラッシュカートリッジが必要です。
SLOT1を使用するNDS用ではGBA BIOSのダンプは行えません。
これは、DSモードではGBA BIOSにアクセス不可、GBAモードではSLOT1にアクセス不可
というNDSの仕様のためです。

NDSのダンプで得られるファイル BIOSNDS7.ROM
 CRC32: 1280F0D5 MD5: DF692A80A5B1BC90728BC3DFC76CD948
これは「NDSのBIOS (NDS-ARM7)」であり、使用することは出来ません。
ファンクションの一部は共通ですが、多くは削除、又は変更されています。


-- ディレクトリ構成

以下のファイルは、同じ構成で同一のディレクトリに置く必要があります。
IR Shellのプラグインとして使用する場合は、この構成でEXTAPP/APPxxに置いて下さい。

その他のファイル、ディレクトリは dir.iniにて指定した通りに配置して下さい。

TempGBA/ (APPxx)
 |
 +- EBOOT.PBP        プログラム本体
 +- ku_bridge.prx    カーネルモードのAPIをユーザーモードで利用する為のプラグイン
 +- exception.prx    例外動作のフック、情報表示を行うプラグイン
 +- game_config.txt  ゲーム設定データベース
 +- gba_bios.bin     GBA BIOSイメージ
 +- dir.ini          ディレクトリの設定


-- 対応拡張子

GBAロムイメージ    .gba .bin .agb
圧縮ファイル       .zip .gbz

対応している拡張子以外のファイルは、リストに表示されません。
gbz は、zipファイルとして扱われます。

圧縮ファイル内のロムイメージは一つのみで、対応する拡張子にして下さい。

ゲームカートリッジのバッファサイズを超えるものは、圧縮ファイルでは読めません。


-- エミュレータの設定

画面表示
 100% GU - 拡大は行わずにGBAと同じ解像度で表示します。データの転送はGPUを使用。
 150% GU - GPUを使用して1.5倍に拡大、データの転送を行います。
 150% SW - GPUを使用せずにソフトウェアで拡大処理、データの転送を行います。
           GPUに比べ負荷が高いため、処理に余裕がない場合は動作速度が低下します。
           画質はあまり良くありませんが、鮮鋭度の低下は少ないです。
 指定 GU - 「画面の拡大率」で指定したサイズで表示をします。拡大、転送はGPUを使用。

画面の拡大率
 画面表示「指定 GU」の拡大率を指定します。
 170%でPSPの画面に収まる最大のサイズになります。

画面のフィルタ
 バイリニアフィルタを使用します。
 GPU使用時のみ有効です。

サウンド音量
 サウンドの出力レベルを変更します。

スタックの最適化
 自動 - game_config.txtにて「iwram_stack_optimize = no」と指定されている場合に
        オフ、指定がない場合はオンになります。
 オフ - 常にオフとなります。

 スタックの最適化は、スタックにIWRAMのみを利用している場合に使用できます。
 異なるメモリ領域を利用している場合には不具合が発生しますので、最適化はオフにし
 て下さい。

 この設定はすべてのゲームに適用される為、動作が改善したソフトはgame_config.txt
 に追加し個別に設定を行う様にして下さい。
 個別指定では起動時にクラッシュする場合には適用出来ない為、全指定となっています。

BIOSから起動を行う
 BIOSから起動を行います。
 カートリッジヘッダに不正な値がある場合には、BIOSにロックされ起動しません。

言語
 表示言語を切り替えます。
 再起動は不要ですが、ゲームに戻るなどでメニューを一旦終了する必要があります。


-- カードリッジ・アドオン

 ・時計(RTC)
 時計機能をゲームのソフトウェアで利用できます。
 PSP本体から時刻を取得していますので、時刻合わせはPSP側で行って下さい。

 ・傾きセンサー
 アナログパッドで、シミュレートします。(アナログパッドに割り当てたキーは無効)
 ゲームのソフトウェアからセンサーへのデータ要求があると自動で有効になります。
 カートリッジの向きはオリジナルのGBA(本体の上部にカートリッジ)で、アナログパッド
 を入力した方向が下となります。


-- セーブタイプ
 バックアップメディアのタイプは、BACKUP IDより取得しています。
 パッチなどを適用し、BACKUP IDとセーブタイプが異なる場合は正常に動作しません。

 ブレスオブファイア 〜竜の戦士〜は、BACKUP IDが EEPROM_V121,FLASH_V124,SRAM_V112
 の3つ存在します。
 この様な特殊なケースが他にも存在し、現在行っている方法で対応できない場合はロム
 イメージの修正が必要です。

 BACKUP IDは、ロムイメージの最後に存在するIDを使用しています。
 BACKUP IDが存在しない場合は、自動判別します。(FLASHメディアのサイズは判別不可)

 EEPROM_Vnnn    EEPROM 512 bytes or 8 Kbytes (4Kbit or 64Kbit)
 SRAM_Vnnn      SRAM 32 Kbytes (256Kbit)
 SRAM_Fnnn      FRAM 32 Kbytes (256Kbit) SRAM互換。
 FLASH_Vnnn     FLASH 64 Kbytes (512Kbit) (ID used in older files)
 FLASH512_Vnnn  FLASH 64 Kbytes (512Kbit) (ID used in newer files)
 FLASH1M_Vnnn   FLASH 128 Kbytes (1Mbit)

 "nnn"は、ツールのバージョン。セーブタイプの判別には使用していません。

